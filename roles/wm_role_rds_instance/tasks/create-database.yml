---
- name: Create database
  rds_instance:
    allocated_storage: "{{ rds_allocated_storage }}"
    allow_major_version_upgrade: "{{ rds_allow_major_version_upgrade }}"
    auto_minor_version_upgrade: "{{ rds_auto_minor_version_upgrade }}"
    copy_tags_to_snapshot: "{{ rds_copy_tags_to_snapshot }}"
    db_instance_identifier: "{{ rds_db_instance_identifier }}"
    db_cluster_identifier: "{{ rds_db_cluster_identifier }}"
    db_name: "{{ rds_db_name }}"
    db_security_groups: "{{ rds_db_security_groups }}"
    db_subnet_group_name: "{{ rds_db_subnet_group_name }}"
    db_instance_class: "{{ rds_db_instance_class }}"
    enable_performance_insights: "{{ rds_enable_performance_insights }}"
    engine: "{{ rds_engine }}"
    engine_version: "{{ rds_engine_version }}"
    final_db_snapshot_identifier: "{{ rds_final_db_snapshot_identifier }}"
    master_username: "{{ rds_master_username }}"
    master_user_password: "{{ rds_master_password }}"
    multi_az: "{{ rds_multi_az }}"
    performance_insights_kms_key_id: "{{ rds_performance_insights_kms_key_id }}"
    performance_insights_retention_period: "{{ rds_performance_insights_retention_period }}"
    port: "{{ rds_port }}"
    preferred_backup_window: "{{ rds_preferred_backup_window }}"
    preferred_maintenance_window: "{{ rds_preferred_maintenance_window }}"
    publicly_accessible: "{{ rds_publicly_accessible }}"
    purge_tags: "{{ rds_purge_tags }}"
    region: "{{ aws_region }}"
    skip_final_snapshot: "{{ rds_skip_final_snapshot }}"
    state: "{{ rds_state }}"
    storage_encrypted: "{{ rds_storage_encrypted }}"
    storage_type: "{{ rds_storage_type }}"
    tags: "{{ rds_tags | items2dict }}"
    vpc_security_group_ids: "{{ rds_vpc_security_group_ids }}"
    wait: "{{ rds_wait }}"
  when: not db_status | d (False)
