---
- name: Assert that list has output dir
  assert:
    that:
      - item.__outputdir is defined or item._o is defined
    fail_msg: 'Outputdir is required, please use __outputdir or _o'
    quiet: yes
  loop: '{{ mydumper_backups }}'

- name: Assert that s3 is fully defined when present
  assert:
    that:
      - item.s3.object is defined
      - item.s3.bucket is defined
    quiet: yes
  when: item.s3 is defined
  loop: '{{ mydumper_backups }}'