---
- name: Check request ids for completed backups
  uri:
    url: '{{ sc_base_url }}/collections?'
    body: '{{ params | join("&") }}'
    method: POST
  vars:
    params:
      - action=requeststatus
      - 'requestid={{ item }}'
    status: '{{ backup_status | json_query("results[].json.status.state") | select("contains", "running") | list }}'
  loop: '{{ request_ids }}'
  register: backup_status

- name: Set status list
  set_fact:
    status_list: '{{ backup_status | json_query("results[].json.status.state") | select("contains", "running") | list }}'
    