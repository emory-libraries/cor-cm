- hosts: s3-iam 
  gather_facts: no

  pre_tasks:
    - name: Get AWS account info
      aws_caller_facts:
      register: caller_facts
      delegate_to: localhost
      tags: always

    - name: Set AWS account info
      set_fact:
        aws_account_number: "{{ caller_facts.account }}"
      delegate_to: localhost
      tags: always

  roles:
    - role: wm_role_iam_s3
      delegate_to: localhost

    - role: wm_role_manage_sg_s3_bucket 
      delegate_to: localhost

    - role: wm_role_manage_efs
      delegate_to: localhost

    - role: ansible-role-acm-cert
      delegate_to: localhost
